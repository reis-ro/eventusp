{% extends 'base.html' %}

{% block title %}
{{ event.name }} ({{ event.date }}
{% endblock title %}

{% block content %}
<h2>Detalhes do Evento {{ event.name }}</h2>

<section class="dados-de-evento">
    <img src="{{ event.cover_photo_url }}" alt="Poster do evento {{ event.name}}">
    <ul>
        <li>Nome: {{ event.name }}</li>
        <li>Data: {{ event.date }} </li>
        <li>Data: {{ event.time }} </li>
        <li>Data: {{ event.duration }} </li>
        <li>Data: {{ event.place }} </li>
        <li>Data: {{ event.description }} </li>
        <li>Data: {{ event.summary }} </li>
        <li>Data: {{ event.max_participants }} </li>
        
        {% if event.provider %}
            <li>Disponibilidade de Streaming: {{ event.provider.service }} </li>
            {% if event.provider.has_flat_price %}
                <li>Preço: FLAT </li>
            {% else %}
                <li>Preço: R${{ event.provider.price }} </li>
            {% endif %}
        {% endif %}
        {% if event.list_set.all %}
           <li>Incluso nas listas: {{ event.list_set.all|join:", " }} </li>
        {% endif %}
        <li><a href="{% url 'events:update' event.id %}">Editar</a></li>
        <li><a href="{% url 'events:delete' event.id %}">Apagar</a></li>
    </ul>
</section>

<hr>

<section>
    <header>
        <h3>Resenhas</h3>
    </header>
    <ul>
        {% if event.review_set.all %}
            {% for review in event.review_set.all %}
                <figure>
                    <blockquote>
                        "{{ review.text }}"
                    </blockquote>
                    <figcaption>—{{ review.author }}
                </figure>
            {% endfor %}
        {% else %}
            <p>Ainda não existe nenhuma resenha para este evento.</p>
        {% endif %}
    </ul>
</section>

</ul>
    
<hr>

<a href="{% url 'events:review' event.pk %}"><button>Crie sua Resenha</button></a>
</section>

{% endblock content %}